<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vesperia Hub | Infinity</title>
    <!-- Иконки -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="icon" type="image/png" href="https://cdn-icons-png.flaticon.com/512/2592/2592966.png">
    
    <style>
        /* === ДИЗАЙН VESPERIA (Тот самый) === */
        :root {
            --bg-color: #050510;
            --card-bg: rgba(25, 20, 50, 0.6);
            --card-hover: rgba(60, 20, 100, 0.8);
            --accent: #9d00ff; /* Vesperia Violet */
            --accent-glow: #d8b4fe;
            --star-color: #ffd700;
            --text-main: #ffffff;
            --text-sec: #b0b0c0;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-main);
            font-family: 'Segoe UI', sans-serif;
            margin: 0;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Анимация космоса */
        .background-animation {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            z-index: -3;
            background: radial-gradient(ellipse at bottom, #1B2735 0%, #090A0F 100%);
        }
        .stars {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            z-index: -2;
            background: url('https://www.transparenttextures.com/patterns/stardust.png');
            animation: starMove 100s linear infinite;
            opacity: 0.8;
        }
        @keyframes starMove {
            from { background-position: 0 0; }
            to { background-position: 1000px 1000px; }
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            text-align: center;
            padding: 60px 0 30px;
        }

        h1 {
            font-size: 4.5rem;
            margin: 0;
            font-weight: 900;
            letter-spacing: 5px;
            text-transform: uppercase;
            background: linear-gradient(to right, #fff, var(--accent), #fff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 30px rgba(157, 0, 255, 0.6);
        }

        .version {
            background: var(--accent);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: bold;
            box-shadow: 0 0 15px var(--accent);
            vertical-align: super;
        }

        /* Поиск */
        .search-wrapper {
            position: relative;
            max-width: 800px;
            margin: 40px auto 0;
        }
        .search-icon {
            position: absolute;
            left: 25px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-sec);
            font-size: 1.3rem;
        }
        .search-box {
            width: 100%;
            padding: 20px 25px 20px 65px;
            border-radius: 50px;
            border: 2px solid rgba(157, 0, 255, 0.3);
            background: rgba(10, 10, 20, 0.9);
            color: white;
            font-size: 1.3rem;
            outline: none;
            transition: 0.3s;
            backdrop-filter: blur(10px);
            box-sizing: border-box;
            box-shadow: 0 0 20px rgba(0,0,0,0.5);
        }
        .search-box:focus {
            border-color: var(--accent-glow);
            box-shadow: 0 0 40px rgba(157, 0, 255, 0.5);
        }

        /* Вкладки */
        .tabs-nav {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 12px;
            margin: 40px 0;
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(255,255,255,0.05);
        }

        .tab-btn {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: var(--text-sec);
            padding: 12px 25px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .tab-btn:hover {
            background: rgba(157, 0, 255, 0.2);
            color: white;
            transform: translateY(-3px);
        }

        .tab-btn.active {
            background: var(--accent);
            border-color: var(--accent-glow);
            color: white;
            box-shadow: 0 0 20px rgba(157, 0, 255, 0.5);
        }

        /* Сетка карточек */
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 18px;
            animation: fadeUp 0.6s ease;
        }

        .card {
            background: var(--card-bg);
            border: 1px solid rgba(157, 0, 255, 0.1);
            border-radius: 16px;
            padding: 15px;
            display: flex;
            align-items: center;
            gap: 15px;
            transition: all 0.2s;
            position: relative;
            backdrop-filter: blur(5px);
            text-decoration: none;
            overflow: hidden;
        }

        .card:hover {
            background: var(--card-hover);
            transform: translateY(-5px) scale(1.02);
            border-color: var(--accent-glow);
            box-shadow: 0 10px 25px rgba(0,0,0,0.5);
        }

        .card-content {
            display: flex;
            align-items: center;
            gap: 15px;
            flex-grow: 1;
            overflow: hidden;
        }

        .card img {
            width: 36px;
            height: 36px;
            border-radius: 8px;
            flex-shrink: 0;
            background: rgba(0,0,0,0.3);
            padding: 2px;
        }

        .card-text {
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .card-title {
            font-weight: 700;
            font-size: 1rem;
            color: white;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .card-desc {
            font-size: 0.8rem;
            color: var(--text-sec);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .fav-btn {
            background: none;
            border: none;
            color: rgba(255,255,255,0.1);
            cursor: pointer;
            font-size: 1.3rem;
            padding: 5px;
            transition: 0.2s;
            z-index: 5;
        }

        .fav-btn:hover, .fav-btn.active {
            color: var(--star-color);
            transform: scale(1.2);
        }
        .fav-btn.active {
            text-shadow: 0 0 15px rgba(255, 215, 0, 0.6);
        }

        @keyframes fadeUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Кастомный скроллбар */
        ::-webkit-scrollbar { width: 10px; }
        ::-webkit-scrollbar-track { background: #050510; }
        ::-webkit-scrollbar-thumb { background: var(--accent); border-radius: 5px; }
        ::-webkit-scrollbar-thumb:hover { background: var(--accent-glow); }
    </style>
</head>
<body>

    <div class="background-animation"></div>
    <div class="stars"></div>

    <div class="container">
        <header>
            <div class="logo-area">
                <h1>VESPERIA HUB</h1>
                <span class="version">v6.0 GALAXY</span>
            </div>
            
            <div class="search-wrapper">
                <i class="fa-solid fa-magnifying-glass search-icon"></i>
                <input type="text" id="search" class="search-box" placeholder="Поиск по вселенной (понимает ghbdtn / привет)...">
            </div>
        </header>

        <nav id="tabs-nav" class="tabs-nav"></nav>
        <div id="content"></div>
    </div>

    <script>
        // === ИКОНКИ ===
        const categoryIcons = {
            "Избранное": "fa-solid fa-star",
            "Главное": "fa-solid fa-house-chimney",
            "Утилиты": "fa-solid fa-screwdriver-wrench",
            "AI / Нейро": "fa-solid fa-brain",
            "Minecraft": "fa-solid fa-cubes",
            "Визуал": "fa-solid fa-eye",
            "Фан": "fa-solid fa-gamepad",
            "Космос": "fa-solid fa-rocket",
            "Аудио": "fa-solid fa-music",
            "Наука": "fa-solid fa-flask",
            "IT / Код": "fa-solid fa-laptop-code",
            "Магазины": "fa-solid fa-cart-shopping",
            "Учеба": "fa-solid fa-graduation-cap"
        };

        // === ОГРОМНАЯ БАЗА ДАННЫХ (Расширенная) ===
        const db = [
            // === ГЛАВНОЕ ===
            { cat: "Главное", name: "Bisquit Host", url: "https://bisquit.host/", desc: "Твой хостинг серверов" },
            { cat: "Главное", name: "Telegram Web", url: "https://web.telegram.org/", desc: "Телеграм (тг, telegram)" },
            { cat: "Главное", name: "Discord", url: "https://discord.com/login", desc: "Дискорд (дс, discord)" },
            { cat: "Главное", name: "YouTube", url: "https://www.youtube.com/", desc: "Ютуб видео" },
            { cat: "Главное", name: "VK", url: "https://vk.com/", desc: "ВКонтакте" },
            { cat: "Главное", name: "Twitch", url: "https://www.twitch.tv/", desc: "Твич стримы" },
            { cat: "Главное", name: "TikTok", url: "https://www.tiktok.com/", desc: "ТикТок видео" },
            { cat: "Главное", name: "Gmail", url: "https://mail.google.com/", desc: "Почта Google" },
            { cat: "Главное", name: "Яндекс Почта", url: "https://mail.yandex.ru/", desc: "Почта Яндекс" },
            { cat: "Главное", name: "Proton Mail", url: "https://proton.me/mail", desc: "Защищенная почта" },
            { cat: "Главное", name: "Google Drive", url: "https://drive.google.com/", desc: "Гугл Диск" },
            { cat: "Главное", name: "Яндекс Диск", url: "https://disk.yandex.ru/", desc: "Облако Яндекс" },
            { cat: "Главное", name: "MEGA", url: "https://mega.io/", desc: "Облако 50ГБ" },
            { cat: "Главное", name: "Dropbox", url: "https://www.dropbox.com/", desc: "Облако файлов" },
            { cat: "Главное", name: "Pinterest", url: "https://www.pinterest.com/", desc: "Идеи и арты" },
            { cat: "Главное", name: "Reddit", url: "https://www.reddit.com/", desc: "Главный форум" },
            { cat: "Главное", name: "Twitter (X)", url: "https://twitter.com/", desc: "Твиттер (новости)" },
            { cat: "Главное", name: "Instagram", url: "https://www.instagram.com/", desc: "Фото соцсеть" },
            { cat: "Главное", name: "Rutube", url: "https://rutube.ru/", desc: "Рутуб (видео)" },
            { cat: "Главное", name: "Dzen", url: "https://dzen.ru/", desc: "Дзен статьи" },
            { cat: "Главное", name: "Google Maps", url: "https://www.google.com/maps", desc: "Гугл Карты" },
            { cat: "Главное", name: "2GIS", url: "https://2gis.ru/", desc: "Карты 2ГИС" },
            { cat: "Главное", name: "Yandex Maps", url: "https://yandex.ru/maps/", desc: "Яндекс Карты" },
            { cat: "Главное", name: "Gismeteo", url: "https://www.gismeteo.ru/", desc: "Погода" },
            { cat: "Главное", name: "Kinopoisk", url: "https://www.kinopoisk.ru/", desc: "Кинопоиск" },
            { cat: "Главное", name: "IMDb", url: "https://www.imdb.com/", desc: "Рейтинг фильмов" },
            { cat: "Главное", name: "Netflix", url: "https://www.netflix.com/", desc: "Сериалы" },
            { cat: "Главное", name: "WhatsApp Web", url: "https://web.whatsapp.com/", desc: "Ватсап" },
            { cat: "Главное", name: "Skype Web", url: "https://web.skype.com/", desc: "Скайп" },
            { cat: "Главное", name: "Zoom", url: "https://zoom.us/", desc: "Звонки" },
            { cat: "Главное", name: "Signal", url: "https://signal.org/", desc: "Приватный мессенджер" },
            { cat: "Главное", name: "Mastodon", url: "https://mastodon.social/", desc: "Соцсеть без цензуры" },
            { cat: "Главное", name: "Kick", url: "https://kick.com/", desc: "Стримы (Kick)" },
            { cat: "Главное", name: "Trovo", url: "https://trovo.live/", desc: "Стримы (Trovo)" },

            // === УТИЛИТЫ ===
            { cat: "Утилиты", name: "Cobalt Tools", url: "https://cobalt.tools/", desc: "Скачать видео без знаков" },
            { cat: "Утилиты", name: "VirusTotal", url: "https://www.virustotal.com/", desc: "Проверка на вирусы" },
            { cat: "Утилиты", name: "DeepL", url: "https://www.deepl.com/translator", desc: "Умный переводчик" },
            { cat: "Утилиты", name: "Convertio", url: "https://convertio.co/ru/", desc: "Конвертер всего" },
            { cat: "Утилиты", name: "TempMail", url: "https://temp-mail.org/", desc: "Временная почта" },
            { cat: "Утилиты", name: "SpeedTest", url: "https://www.speedtest.net/", desc: "Спидтест" },
            { cat: "Утилиты", name: "Check-Host", url: "https://check-host.net/", desc: "Чек IP и пинга" },
            { cat: "Утилиты", name: "2IP", url: "https://2ip.ru/", desc: "Узнать мой IP" },
            { cat: "Утилиты", name: "Whoer", url: "https://whoer.net/ru", desc: "Анонимность в сети" },
            { cat: "Утилиты", name: "Remove.bg", url: "https://www.remove.bg/", desc: "Удалить фон" },
            { cat: "Утилиты", name: "Photopea", url: "https://www.photopea.com/", desc: "Фотошоп онлайн" },
            { cat: "Утилиты", name: "Waifu2x", url: "https://waifu2x.udp.jp/", desc: "Улучшить аниме фото" },
            { cat: "Утилиты", name: "BigJpg", url: "https://bigjpg.com/", desc: "Апскейл картинок" },
            { cat: "Утилиты", name: "TinyPNG", url: "https://tinypng.com/", desc: "Сжать фото" },
            { cat: "Утилиты", name: "Screenshot Guru", url: "https://screenshot.guru/", desc: "Скрин сайта целиком" },
            { cat: "Утилиты", name: "Privnote", url: "https://privnote.com/", desc: "Записка сгорает" },
            { cat: "Утилиты", name: "Pastebin", url: "https://pastebin.com/", desc: "Код текстом" },
            { cat: "Утилиты", name: "IP Logger", url: "https://iplogger.org/", desc: "Сократить ссылку" },
            { cat: "Утилиты", name: "Archive.org", url: "https://web.archive.org/", desc: "Машина времени сайтов" },
            { cat: "Утилиты", name: "10 Minute Mail", url: "https://10minutemail.com/", desc: "Почта на 10 мин" },
            { cat: "Утилиты", name: "Ninite", url: "https://ninite.com/", desc: "Установить всё разом" },
            { cat: "Утилиты", name: "WinDirStat", url: "https://windirstat.net/", desc: "Что занимает место на ПК" },
            { cat: "Утилиты", name: "Keyboard Test", url: "https://key-test.ru/", desc: "Тест клавиатуры" },
            { cat: "Утилиты", name: "Mouse Test", url: "https://cps-check.com/ru/mouse-buttons-test", desc: "Тест мыши" },
            { cat: "Утилиты", name: "Mic Test", url: "https://mictests.com/", desc: "Тест микрофона" },
            { cat: "Утилиты", name: "Webcam Test", url: "https://webcamtests.com/", desc: "Тест вебки" },
            { cat: "Утилиты", name: "QR Generator", url: "https://ru.qr-code-generator.com/", desc: "Создать QR код" },
            { cat: "Утилиты", name: "PDF I Love", url: "https://www.ilovepdf.com/ru", desc: "Работа с PDF" },
            { cat: "Утилиты", name: "TinyWow", url: "https://tinywow.com/", desc: "Бесплатные инструменты" },
            { cat: "Утилиты", name: "Regex101", url: "https://regex101.com/", desc: "Тест регулярок" },
            { cat: "Утилиты", name: "JSON Formatter", url: "https://jsonformatter.curiousconcept.com/", desc: "Красивый JSON" },
            { cat: "Утилиты", name: "DiffChecker", url: "https://www.diffchecker.com/", desc: "Сравнить два текста" },
            { cat: "Утилиты", name: "Password Gen", url: "https://www.lastpass.com/features/password-generator", desc: "Генератор паролей" },
            { cat: "Утилиты", name: "Have I Been Pwned", url: "https://haveibeenpwned.com/", desc: "Проверка слива почты" },
            { cat: "Утилиты", name: "BrowserLeaks", url: "https://browserleaks.com/", desc: "Что знает браузер" },

            // === AI / НЕЙРОСЕТИ ===
            { cat: "AI / Нейро", name: "ChatGPT", url: "https://chat.openai.com/", desc: "Чат ГПТ" },
            { cat: "AI / Нейро", name: "Google Gemini", url: "https://gemini.google.com/", desc: "Гугл ИИ" },
            { cat: "AI / Нейро", name: "Midjourney", url: "https://www.midjourney.com/", desc: "Генерация артов" },
            { cat: "AI / Нейро", name: "Suno", url: "https://suno.com/", desc: "Создание песен" },
            { cat: "AI / Нейро", name: "Grok", url: "https://grok.x.ai/", desc: "ИИ Илона Маска" },
            { cat: "AI / Нейро", name: "Claude AI", url: "https://claude.ai/", desc: "Умный чат-бот" },
            { cat: "AI / Нейро", name: "Character.ai", url: "https://beta.character.ai/", desc: "Ролевой чат" },
            { cat: "AI / Нейро", name: "VocalRemover", url: "https://vocalremover.org/ru/", desc: "Сделать минус" },
            { cat: "AI / Нейро", name: "ElevenLabs", url: "https://elevenlabs.io/", desc: "Озвучка текста" },
            { cat: "AI / Нейро", name: "Luma Dream Machine", url: "https://lumalabs.ai/dream-machine", desc: "Видео из текста" },
            { cat: "AI / Нейро", name: "Perplexity", url: "https://www.perplexity.ai/", desc: "ИИ Поисковик" },
            { cat: "AI / Нейро", name: "Bing Chat", url: "https://www.bing.com/chat", desc: "Copilot Microsoft" },
            { cat: "AI / Нейро", name: "Poe", url: "https://poe.com/", desc: "Все боты в одном" },
            { cat: "AI / Нейро", name: "Hugging Face", url: "https://huggingface.co/", desc: "Каталог моделей" },
            { cat: "AI / Нейро", name: "Civitai", url: "https://civitai.com/", desc: "Модели Stable Diffusion" },
            { cat: "AI / Нейро", name: "Leonardo.ai", url: "https://leonardo.ai/", desc: "Генерация картинок" },
            { cat: "AI / Нейро", name: "DALL-E 3", url: "https://www.bing.com/images/create", desc: "Картинки от Bing" },
            { cat: "AI / Нейро", name: "Lexica", url: "https://lexica.art/", desc: "Поиск промптов" },
            { cat: "AI / Нейро", name: "Udio", url: "https://www.udio.com/", desc: "Музыка AI (как Suno)" },
            { cat: "AI / Нейро", name: "Lalal.ai", url: "https://www.lalal.ai/", desc: "Разделить музыку" },
            { cat: "AI / Нейро", name: "RunwayML", url: "https://runwayml.com/", desc: "Видео нейросеть" },
            { cat: "AI / Нейро", name: "Pika Labs", url: "https://pika.art/", desc: "Анимация картинок" },
            { cat: "AI / Нейро", name: "Gamma", url: "https://gamma.app/", desc: "Презентации AI" },
            { cat: "AI / Нейро", name: "Phind", url: "https://www.phind.com/", desc: "ИИ для программистов" },
            { cat: "AI / Нейро", name: "Blackbox", url: "https://www.blackbox.ai/", desc: "Помощь с кодом" },
            { cat: "AI / Нейро", name: "Copy.ai", url: "https://www.copy.ai/", desc: "Копирайтинг" },
            { cat: "AI / Нейро", name: "Jasper", url: "https://www.jasper.ai/", desc: "Тексты для бизнеса" },
            { cat: "AI / Нейро", name: "HuggingChat", url: "https://huggingface.co/chat/", desc: "OpenSource чат" },
            { cat: "AI / Нейро", name: "Stable Audio", url: "https://stableaudio.com/", desc: "Звуки и музыка" },
            { cat: "AI / Нейро", name: "Krea AI", url: "https://www.krea.ai/", desc: "Рисование в реальном времени" },

            // === MINECRAFT ===
            { cat: "Minecraft", name: "Bisquit Host", url: "https://bisquit.host/", desc: "Хостинг серверов" },
            { cat: "Minecraft", name: "Modrinth", url: "https://modrinth.com/", desc: "Скачать моды (Топ)" },
            { cat: "Minecraft", name: "CurseForge", url: "https://www.curseforge.com/minecraft", desc: "База модов" },
            { cat: "Minecraft", name: "NameMC", url: "https://ru.namemc.com/", desc: "Скины и ники" },
            { cat: "Minecraft", name: "PlanetMinecraft", url: "https://www.planetminecraft.com/", desc: "Карты и Текстуры" },
            { cat: "Minecraft", name: "ChunkBase", url: "https://www.chunkbase.com/", desc: "Поиск биомов/сиды" },
            { cat: "Minecraft", name: "Minecraft Heads", url: "https://minecraft-heads.com/", desc: "Декор головы" },
            { cat: "Minecraft", name: "Minecraft Tools", url: "https://minecraft.tools/ru/", desc: "Генераторы крафтов" },
            { cat: "Minecraft", name: "MapMaking Tools", url: "https://mcstacker.net/", desc: "Генератор команд" },
            { cat: "Minecraft", name: "SpigotMC", url: "https://www.spigotmc.org/", desc: "Плагины" },
            { cat: "Minecraft", name: "Nova Skin", url: "https://novaskin.me/", desc: "Редактор скинов" },
            { cat: "Minecraft", name: "Aternos", url: "https://aternos.org/", desc: "Бесплатный хост" },
            { cat: "Minecraft", name: "VanillaTweaks", url: "https://vanillatweaks.net/", desc: "Ресурспаки" },
            { cat: "Minecraft", name: "Litematica", url: "https://masa.dy.fi/litematica/", desc: "Схематики" },
            { cat: "Minecraft", name: "PaperMC", url: "https://papermc.io/", desc: "Ядро сервера" },
            { cat: "Minecraft", name: "Bukkit", url: "https://dev.bukkit.org/", desc: "Плагины (Old)" },
            { cat: "Minecraft", name: "SkinGrabber", url: "https://mcskinsearch.com/", desc: "Поиск скинов" },
            { cat: "Minecraft", name: "Minotar", url: "https://minotar.net/", desc: "API голов" },
            { cat: "Minecraft", name: "McStacker", url: "https://mcstacker.net/", desc: "Команды JSON" },
            { cat: "Minecraft", name: "GamerGeeks", url: "https://www.gamergeeks.net/apps/minecraft", desc: "Генераторы баннеров" },
            { cat: "Minecraft", name: "Crafting Guide", url: "https://www.minecraft-crafting.net/", desc: "Рецепты" },
            { cat: "Minecraft", name: "Plotz", url: "https://www.plotz.co.uk/", desc: "Строить сферы" },
            { cat: "Minecraft", name: "Server.pro", url: "https://server.pro/", desc: "Хостинг" },
            { cat: "Minecraft", name: "TLauncher", url: "https://tlauncher.org/", desc: "Лаунчер" },
            { cat: "Minecraft", name: "FabricMC", url: "https://fabricmc.net/", desc: "Загрузчик модов" },
            { cat: "Minecraft", name: "OptiFine", url: "https://optifine.net/", desc: "Оптимизация" },
            { cat: "Minecraft", name: "Sodium", url: "https://modrinth.com/mod/sodium", desc: "FPS Буст" },
            { cat: "Minecraft", name: "Iris Shaders", url: "https://irisshaders.dev/", desc: "Шейдеры" },
            { cat: "Minecraft", name: "Authlib Injector", url: "https://authlib-injector.yggdrasil.tv/", desc: "Своя авторизация" },
            { cat: "Minecraft", name: "MC Icons", url: "https://mcicons.ccleaf.com/", desc: "Иконки серверов" },
            { cat: "Minecraft", name: "RGB Gradient", url: "https://rgb.birdflop.com/", desc: "Градиент чата" },
            { cat: "Minecraft", name: "Wiki Minecraft", url: "https://minecraft.wiki/", desc: "Википедия" },
            { cat: "Minecraft", name: "FTB Modpacks", url: "https://www.feed-the-beast.com/", desc: "Сборки модов" },
            { cat: "Minecraft", name: "Technic Platform", url: "https://www.technicpack.net/", desc: "Лаунчер модов" },
            { cat: "Minecraft", name: "Exaroton", url: "https://exaroton.com/", desc: "Платный Атернос" },

            // === ВИЗУАЛ ===
            { cat: "Визуал", name: "CoolSymbol", url: "https://coolsymbol.com/", desc: "Символы" },
            { cat: "Визуал", name: "Unicode Table", url: "https://unicode-table.com/ru/", desc: "Юникод" },
            { cat: "Визуал", name: "Kaomoji", url: "https://kaomoji.ru/", desc: "Японские смайлы" },
            { cat: "Визуал", name: "ColorHunt", url: "https://colorhunt.co/", desc: "Палитры" },
            { cat: "Визуал", name: "Google Fonts", url: "https://fonts.google.com/", desc: "Шрифты" },
            { cat: "Визуал", name: "Piskel", url: "https://www.piskelapp.com/", desc: "Пиксель арт" },
            { cat: "Визуал", name: "EzGif", url: "https://ezgif.com/", desc: "GIF редактор" },
            { cat: "Визуал", name: "Figma", url: "https://www.figma.com/", desc: "Дизайн" },
            { cat: "Визуал", name: "Symbl", url: "https://symbl.cc/ru/", desc: "Эмодзи и знаки" },
            { cat: "Визуал", name: "Coolors", url: "https://coolors.co/", desc: "Генератор цветов" },
            { cat: "Визуал", name: "DaFont", url: "https://www.dafont.com/", desc: "Скачать шрифты" },
            { cat: "Визуал", name: "FontAwesome", url: "https://fontawesome.com/icons", desc: "Иконки для сайта" },
            { cat: "Визуал", name: "Flaticon", url: "https://www.flaticon.com/", desc: "PNG иконки" },
            { cat: "Визуал", name: "Icons8", url: "https://icons8.com/", desc: "Иконки и фото" },
            { cat: "Визуал", name: "Unsplash", url: "https://unsplash.com/", desc: "Фото стоки" },
            { cat: "Визуал", name: "Pexels", url: "https://www.pexels.com/", desc: "Видео стоки" },
            { cat: "Визуал", name: "Pixabay", url: "https://pixabay.com/", desc: "Бесплатные фото" },
            { cat: "Визуал", name: "Canva", url: "https://www.canva.com/", desc: "Простой дизайн" },
            { cat: "Визуал", name: "Lospec", url: "https://lospec.com/", desc: "Палитры пикселей" },
            { cat: "Визуал", name: "Aseprite", url: "https://www.aseprite.org/", desc: "Софт для пикселей" },
            { cat: "Визуал", name: "CSS Gradient", url: "https://cssgradient.io/", desc: "CSS Градиенты" },
            { cat: "Визуал", name: "Clippy", url: "https://bennettfeely.com/clippy/", desc: "CSS формы" },
            { cat: "Визуал", name: "GetEmoji", url: "https://getemoji.com/", desc: "Все эмодзи" },
            { cat: "Визуал", name: "Fluid Sim", url: "https://paveldogreat.github.io/WebGL-Fluid-Simulation/", desc: "Жидкость" },
            { cat: "Визуал", name: "ZoomQuilt", url: "https://zoomquilt.org/", desc: "Бесконечный зум" },
            { cat: "Визуал", name: "Weavesilk", url: "http://weavesilk.com/", desc: "Рисование шелком" },
            { cat: "Визуал", name: "Autodraw", url: "https://www.autodraw.com/", desc: "Google рисовалка" },
            { cat: "Визуал", name: "Vector Magic", url: "https://vectormagic.com/", desc: "Векторизация" },
            { cat: "Визуал", name: "Material Design", url: "https://m3.material.io/", desc: "Гайды дизайна" },
            { cat: "Визуал", name: "Dribbble", url: "https://dribbble.com/", desc: "Вдохновение" },
            { cat: "Визуал", name: "Behance", url: "https://www.behance.net/", desc: "Портфолио" },

            // === ФАН & РАЗВЛЕЧЕНИЯ ===
            { cat: "Фан", name: "Neal.fun", url: "https://neal.fun/", desc: "Лучшие мини-игры" },
            { cat: "Фан", name: "GeoGuessr", url: "https://www.geoguessr.com/", desc: "Угадай место" },
            { cat: "Фан", name: "Akinator", url: "https://ru.akinator.com/", desc: "Джинн" },
            { cat: "Фан", name: "The Useless Web", url: "https://theuselessweb.com/", desc: "Бесполезный сайт" },
            { cat: "Фан", name: "Quick Draw", url: "https://quickdraw.withgoogle.com/", desc: "Угадай рисунок" },
            { cat: "Фан", name: "Little Alchemy 2", url: "https://littlealchemy2.com/", desc: "Алхимия" },
            { cat: "Фан", name: "Hacker Typer", url: "https://hackertyper.net/", desc: "Симулятор хакера" },
            { cat: "Фан", name: "Pointer Pointer", url: "https://pointerpointer.com/", desc: "Палец на курсор" },
            { cat: "Фан", name: "Infinite Craft", url: "https://neal.fun/infinite-craft/", desc: "Бесконечный крафт" },
            { cat: "Фан", name: "CityGuesser", url: "https://virtualvacation.us/guess", desc: "Угадай город" },
            { cat: "Фан", name: "Paper.io", url: "https://paper-io.com/", desc: "Захват зоны" },
            { cat: "Фан", name: "Slither.io", url: "http://slither.io/", desc: "Змейка" },
            { cat: "Фан", name: "Agar.io", url: "https://agar.io/", desc: "Клетки" },
            { cat: "Фан", name: "Krunker", url: "https://krunker.io/", desc: "Шутер" },
            { cat: "Фан", name: "Slow Roads", url: "https://slowroads.io/", desc: "Вождение" },
            { cat: "Фан", name: "Dino Swords", url: "https://dinoswords.gg/", desc: "Динозаврик с оружием" },
            { cat: "Фан", name: "GeekTyper", url: "https://geektyper.com/", desc: "Взлом" },
            { cat: "Фан", name: "Windows 93", url: "http://www.windows93.net/", desc: "Windows наркомана" },
            { cat: "Фан", name: "Staggering Beauty", url: "http://www.staggeringbeauty.com/", desc: "Скример червяк" },
            { cat: "Фан", name: "Cookie Clicker", url: "https://orteil.dashnet.org/cookieclicker/", desc: "Кликер печенья" },
            { cat: "Фан", name: "Evol. of Trust", url: "https://ncase.me/trust/", desc: "Эволюция доверия" },
            { cat: "Фан", name: "Gartic Phone", url: "https://garticphone.com/ru", desc: "Сломанный телефон" },
            { cat: "Фан", name: "Skribbl.io", url: "https://skribbl.io/", desc: "Рисовалка" },
            { cat: "Фан", name: "Jigsaw Explorer", url: "https://www.jigsawexplorer.com/", desc: "Пазлы" },
            { cat: "Фан", name: "Internet Map", url: "https://internet-map.net/", desc: "Карта интернета" },
            { cat: "Фан", name: "Chrome Dino", url: "https://chromedino.com/", desc: "Игра динозавр" },
            { cat: "Фан", name: "Pacman", url: "https://www.google.com/logos/2010/pacman10-i.html", desc: "Пакман" },
            { cat: "Фан", name: "2048", url: "https://play2048.co/", desc: "Игра 2048" },
            { cat: "Фан", name: "Tetris", url: "https://tetris.com/play-tetris", desc: "Тетрис" },
            { cat: "Фан", name: "Minesweeper", url: "https://minesweeper.online/ru/", desc: "Сапер" },
            { cat: "Фан", name: "Typeracer", url: "https://play.typeracer.com/", desc: "Гонки на клавиатуре" },
            { cat: "Фан", name: "MonkeyType", url: "https://monkeytype.com/", desc: "Тест печати" },

            // === КОСМОС ===
            { cat: "Космос", name: "FlightRadar24", url: "https://www.flightradar24.com/", desc: "Самолеты" },
            { cat: "Космос", name: "Stellarium", url: "https://stellarium-web.org/", desc: "Звездное небо" },
            { cat: "Космос", name: "Radio Garden", url: "http://radio.garden/", desc: "Радио глобус" },
            { cat: "Космос", name: "Drive & Listen", url: "https://driveandlisten.herokuapp.com/", desc: "Поездка по городам" },
            { cat: "Космос", name: "ISS Live", url: "https://eol.jsc.nasa.gov/ESRS/HDEV/", desc: "МКС Эфир" },
            { cat: "Космос", name: "NASA Eyes", url: "https://eyes.nasa.gov/", desc: "Глаза NASA" },
            { cat: "Космос", name: "MarineTraffic", url: "https://www.marinetraffic.com/", desc: "Корабли" },
            { cat: "Космос", name: "WindowSwap", url: "https://www.window-swap.com/", desc: "Вид из чужого окна" },
            { cat: "Космос", name: "Earth Nullschool", url: "https://earth.nullschool.net/", desc: "Карта ветров" },
            { cat: "Космос", name: "100,000 Stars", url: "https://stars.chromeexperiments.com/", desc: "Галактика 3D" },
            { cat: "Космос", name: "Solar System", url: "https://www.solarsystemscope.com/", desc: "Солнечная система" },
            { cat: "Космос", name: "Astronaut.io", url: "https://astronaut.io/", desc: "Случайные видео" },
            { cat: "Космос", name: "Google Earth", url: "https://earth.google.com/", desc: "Земля 3D" },
            { cat: "Космос", name: "WikiMapia", url: "https://wikimapia.org/", desc: "Карта объектов" },
            { cat: "Космос", name: "Lightning Maps", url: "https://www.lightningmaps.org/", desc: "Грозы онлайн" },
            { cat: "Космос", name: "Submarine Cable", url: "https://www.submarinecablemap.com/", desc: "Интернет кабели" },
            { cat: "Космос", name: "Deep Sea", url: "https://neal.fun/deep-sea/", desc: "Глубины океана" },
            { cat: "Космос", name: "Scale of Universe", url: "https://scaleofuniverse.com/", desc: "Масштаб вселенной" },
            { cat: "Космос", name: "Population.io", url: "https://population.io/", desc: "Население мира" },
            { cat: "Космос", name: "Worldometer", url: "https://www.worldometers.info/", desc: "Статистика" },
            { cat: "Космос", name: "James Webb Tracker", url: "https://webb.nasa.gov/content/webbLaunch/whereIsWebb.html", desc: "Где телескоп Джеймс Уэбб" },
            { cat: "Космос", name: "Moon Phase", url: "https://www.moongiant.com/phase/today/", desc: "Фаза луны" },
            { cat: "Космос", name: "Mars Trek", url: "https://trek.nasa.gov/mars/", desc: "Карта Марса" },

            // === АУДИО ===
            { cat: "Аудио", name: "Яндекс Музыка", url: "https://music.yandex.ru/", desc: "Плеер" },
            { cat: "Аудио", name: "Spotify", url: "https://open.spotify.com/", desc: "Спотифай" },
            { cat: "Аудио", name: "MyInstants", url: "https://www.myinstants.com/", desc: "Звуки мемов" },
            { cat: "Аудио", name: "Incredibox", url: "https://www.incredibox.com/", desc: "Битбокс" },
            { cat: "Аудио", name: "Rainyscope", url: "https://rainyscope.com/", desc: "Шум дождя" },
            { cat: "Аудио", name: "SoundCloud", url: "https://soundcloud.com/", desc: "Инди музыка" },
            { cat: "Аудио", name: "Noisli", url: "https://www.noisli.com/", desc: "Фоновые звуки" },
            { cat: "Аудио", name: "Lofi Girl", url: "https://lofigirl.com/", desc: "Lofi радио" },
            { cat: "Аудио", name: "Every Noise", url: "https://everynoise.com/", desc: "Жанры музыки" },
            { cat: "Аудио", name: "Blob Opera", url: "https://artsandculture.google.com/experiment/blob-opera/", desc: "Опера" },
            { cat: "Аудио", name: "Pink Trombone", url: "https://dood.al/pinktrombone/", desc: "Голос (Рот)" },
            { cat: "Аудио", name: "BeepBox", url: "https://beepbox.co/", desc: "Чиптюн мейкер" },
            { cat: "Аудио", name: "Online Sequencer", url: "https://onlinesequencer.net/", desc: "Пианино" },
            { cat: "Аудио", name: "Shazam Web", url: "https://www.shazam.com/ru", desc: "Угадать песню" },
            { cat: "Аудио", name: "Radio Garden", url: "http://radio.garden/", desc: "Радио" },
            { cat: "Аудио", name: "NoCopyrightSounds", url: "https://ncs.io/", desc: "Музыка без АП" },
            { cat: "Аудио", name: "Generative.fm", url: "https://generative.fm/", desc: "Эмбиент генератор" },
            { cat: "Аудио", name: "Tabletop Audio", url: "https://tabletopaudio.com/", desc: "Звуки для RPG" },
            { cat: "Аудио", name: "MyNoise", url: "https://mynoise.net/", desc: "Генератор шума" },

            // === IT / КОД ===
            { cat: "IT / Код", name: "GitHub", url: "https://github.com/", desc: "Репозитории" },
            { cat: "IT / Код", name: "StackOverflow", url: "https://stackoverflow.com/", desc: "Вопросы" },
            { cat: "IT / Код", name: "Replit", url: "https://replit.com/", desc: "IDE Онлайн" },
            { cat: "IT / Код", name: "Roadmap.sh", url: "https://roadmap.sh/", desc: "Карта развития" },
            { cat: "IT / Код", name: "Carbon", url: "https://carbon.now.sh/", desc: "Скрины кода" },
            { cat: "IT / Код", name: "RegExr", url: "https://regexr.com/", desc: "Регулярки" },
            { cat: "IT / Код", name: "CodePen", url: "https://codepen.io/", desc: "HTML/CSS песочница" },
            { cat: "IT / Код", name: "JSFiddle", url: "https://jsfiddle.net/", desc: "JS песочница" },
            { cat: "IT / Код", name: "JSON Lint", url: "https://jsonlint.com/", desc: "JSON Валидатор" },
            { cat: "IT / Код", name: "DevDocs", url: "https://devdocs.io/", desc: "Документация" },
            { cat: "IT / Код", name: "MDN Web Docs", url: "https://developer.mozilla.org/", desc: "Учебник Web" },
            { cat: "IT / Код", name: "W3Schools", url: "https://www.w3schools.com/", desc: "Уроки кода" },
            { cat: "IT / Код", name: "LeetCode", url: "https://leetcode.com/", desc: "Задачи" },
            { cat: "IT / Код", name: "CodeWars", url: "https://www.codewars.com/", desc: "Задачи (Ката)" },
            { cat: "IT / Код", name: "HackerRank", url: "https://www.hackerrank.com/", desc: "Тесты" },
            { cat: "IT / Код", name: "Cloudflare", url: "https://www.cloudflare.com/", desc: "CDN и DNS" },
            { cat: "IT / Код", name: "DigitalOcean", url: "https://www.digitalocean.com/", desc: "VPS Хостинг" },
            { cat: "IT / Код", name: "Vercel", url: "https://vercel.com/", desc: "Хостинг сайтов" },
            { cat: "IT / Код", name: "Netlify", url: "https://www.netlify.com/", desc: "Хостинг сайтов" },
            { cat: "IT / Код", name: "Can I Use", url: "https://caniuse.com/", desc: "Поддержка браузеров" },
            { cat: "IT / Код", name: "NPM", url: "https://www.npmjs.com/", desc: "Пакеты JS" },
            { cat: "IT / Код", name: "PyPI", url: "https://pypi.org/", desc: "Пакеты Python" },
            { cat: "IT / Код", name: "Docker Hub", url: "https://hub.docker.com/", desc: "Контейнеры" },
            { cat: "IT / Код", name: "GitLab", url: "https://about.gitlab.com/", desc: "Git альтернатива" },
            { cat: "IT / Код", name: "CSS Tricks", url: "https://css-tricks.com/", desc: "Трюки CSS" },
            { cat: "IT / Код", name: "FreeCodeCamp", url: "https://www.freecodecamp.org/", desc: "Курсы кодинга" },
            { cat: "IT / Код", name: "Bootstrap", url: "https://getbootstrap.com/", desc: "CSS Фреймворк" },
            { cat: "IT / Код", name: "Tailwind CSS", url: "https://tailwindcss.com/", desc: "CSS Фреймворк" },
            { cat: "IT / Код", name: "React", url: "https://react.dev/", desc: "JS Библиотека" },
            { cat: "IT / Код", name: "Vue.js", url: "https://vuejs.org/", desc: "JS Фреймворк" },

            // === МАГАЗИНЫ ===
            { cat: "Магазины", name: "Steam", url: "https://store.steampowered.com/", desc: "Стим" },
            { cat: "Магазины", name: "SteamDB", url: "https://steamdb.info/", desc: "База Стим" },
            { cat: "Магазины", name: "FunPay", url: "https://funpay.com/", desc: "Фанпей" },
            { cat: "Магазины", name: "Plati Market", url: "https://plati.market/", desc: "Плати Маркет" },
            { cat: "Магазины", name: "Pepper", url: "https://www.pepper.ru/", desc: "Пеппер (скидки)" },
            { cat: "Магазины", name: "DNS", url: "https://www.dns-shop.ru/", desc: "ДНС" },
            { cat: "Магазины", name: "Wildberries", url: "https://www.wildberries.ru/", desc: "Вайлдберриз" },
            { cat: "Магазины", name: "Ozon", url: "https://www.ozon.ru/", desc: "Озон" },
            { cat: "Магазины", name: "Epic Games", url: "https://store.epicgames.com/", desc: "Халява" },
            { cat: "Магазины", name: "GOG", url: "https://www.gog.com/", desc: "Игры без DRM" },
            { cat: "Магазины", name: "Itch.io", url: "https://itch.io/", desc: "Инди игры" },
            { cat: "Магазины", name: "GGSel", url: "https://ggsel.net/", desc: "Маркет ключей" },
            { cat: "Магазины", name: "Kupikod", url: "https://kupikod.com/", desc: "Пополнение Steam" },
            { cat: "Магазины", name: "AliExpress", url: "https://aliexpress.ru/", desc: "АлиЭкспресс" },
            { cat: "Магазины", name: "Avito", url: "https://www.avito.ru/", desc: "Авито" },
            { cat: "Магазины", name: "Yandex Market", url: "https://market.yandex.ru/", desc: "Яндекс Маркет" },
            { cat: "Магазины", name: "MVideo", url: "https://www.mvideo.ru/", desc: "М.Видео" },
            { cat: "Магазины", name: "Eldorado", url: "https://www.eldorado.ru/", desc: "Эльдорадо" },
            { cat: "Магазины", name: "Citilink", url: "https://www.citilink.ru/", desc: "Ситилинк" },
            { cat: "Магазины", name: "SberMegaMarket", url: "https://sbermegamarket.ru/", desc: "Мегамаркет" },
            { cat: "Магазины", name: "KeysForGamers", url: "https://keysforgamers.com/", desc: "Ключи" },
            { cat: "Магазины", name: "Eneba", url: "https://www.eneba.com/", desc: "Ключи игр" },
            { cat: "Магазины", name: "CDKeys", url: "https://www.cdkeys.com/", desc: "Дешевые игры" },
            { cat: "Магазины", name: "Humble Bundle", url: "https://www.humblebundle.com/", desc: "Паки игр" },

            // === УЧЕБА ===
            { cat: "Учеба", name: "Фоксфорд", url: "https://foxford.ru/", desc: "Школа" },
            { cat: "Учеба", name: "Википедия", url: "https://ru.wikipedia.org/", desc: "Википедия" },
            { cat: "Учеба", name: "WolframAlpha", url: "https://www.wolframalpha.com/", desc: "Вольфрам" },
            { cat: "Учеба", name: "Gdz.ru", url: "https://gdz.ru/", desc: "ГДЗ" },
            { cat: "Учеба", name: "Stepik", url: "https://stepik.org/", desc: "Степик" },
            { cat: "Учеба", name: "Duolingo", url: "https://www.duolingo.com/", desc: "Языки" },
            { cat: "Учеба", name: "Desmos", url: "https://www.desmos.com/", desc: "Графики" },
            { cat: "Учеба", name: "Symbolab", url: "https://www.symbolab.com/", desc: "Решебник" },
            { cat: "Учеба", name: "Reverso", url: "https://context.reverso.net/", desc: "Контекст" },
            { cat: "Учеба", name: "Google Scholar", url: "https://scholar.google.ru/", desc: "Статьи" },
            { cat: "Учеба", name: "Z-Library", url: "https://z-lib.io/", desc: "Книги" },
            { cat: "Учеба", name: "Sci-Hub", url: "https://sci-hub.se/", desc: "Наука бесплатно" },
            { cat: "Учеба", name: "Coursera", url: "https://www.coursera.org/", desc: "Курсы ВУЗов" },
            { cat: "Учеба", name: "Khan Academy", url: "https://ru.khanacademy.org/", desc: "Обучение" },
            { cat: "Учеба", name: "Brainly", url: "https://znanija.com/", desc: "Ответы ДЗ" },
            { cat: "Учеба", name: "MuscleWiki", url: "https://musclewiki.com/", desc: "Спорт" },
            { cat: "Учеба", name: "Periodic Table", url: "https://ptable.com/", desc: "Таблица Менделеева" },
            { cat: "Учеба", name: "Lingualeo", url: "https://lingualeo.com/", desc: "Английский" },
            { cat: "Учеба", name: "Puzzle English", url: "https://puzzle-english.com/", desc: "Английский пазлы" },
            { cat: "Учеба", name: "Uchi.ru", url: "https://uchi.ru/", desc: "Учи.ру" },
            { cat: "Учеба", name: "Resh", url: "https://resh.edu.ru/", desc: "РЭШ" },
            { cat: "Учеба", name: "CyberLeninka", url: "https://cyberleninka.ru/", desc: "Научная библиотека" },
            { cat: "Учеба", name: "Habr", url: "https://habr.com/", desc: "Статьи IT" },
            { cat: "Учеба", name: "Briefly", url: "https://briefly.ru/", desc: "Краткое содержание" },
            { cat: "Учеба", name: "Grammarly", url: "https://www.grammarly.com/", desc: "Проверка грамматики" }
        ];

        // === ЛОГИКА ===
        let currentCategory = "Избранное";
        let favorites = JSON.parse(localStorage.getItem('vesperiaFavs')) || [];

        function fixKeyboardLayout(text) {
            const replacer = {
                "q":"й", "w":"ц", "e":"у", "r":"к", "t":"е", "y":"н", "u":"г", 
                "i":"ш", "o":"щ", "p":"з", "[":"х", "]":"ъ", "a":"ф", "s":"ы", 
                "d":"в", "f":"а", "g":"п", "h":"р", "j":"о", "k":"л", "l":"д", 
                ";":"ж", "'":"э", "z":"я", "x":"ч", "c":"с", "v":"м", "b":"и", 
                "n":"т", "m":"ь", ",":"б", ".":"ю", "/":"."
            };
            return text.toLowerCase().split('').map(char => replacer[char] || char).join('');
        }

        function renderTabs() {
            const nav = document.getElementById('tabs-nav');
            nav.innerHTML = "";
            const categories = ["Избранное", ...new Set(db.map(item => item.cat))];

            categories.forEach(cat => {
                const btn = document.createElement('button');
                btn.className = `tab-btn ${cat === currentCategory ? 'active' : ''}`;
                const iconClass = categoryIcons[cat] || "fa-solid fa-folder";
                btn.innerHTML = `<i class="${iconClass}"></i> ${cat}`;
                
                btn.onclick = () => {
                    currentCategory = cat;
                    document.getElementById('search').value = "";
                    renderTabs();
                    renderSites();
                };
                nav.appendChild(btn);
            });
        }

        function renderSites(searchQuery = "") {
            const container = document.getElementById('content');
            container.innerHTML = "";
            let sitesToShow = [];
            const lowerQuery = searchQuery.toLowerCase();
            const fixedQuery = fixKeyboardLayout(lowerQuery);

            if (searchQuery.trim() !== "") {
                sitesToShow = db.filter(site => 
                    site.name.toLowerCase().includes(lowerQuery) || 
                    site.desc.toLowerCase().includes(lowerQuery) ||
                    site.name.toLowerCase().includes(fixedQuery) ||
                    site.desc.toLowerCase().includes(fixedQuery)
                );
            } else if (currentCategory === "Избранное") {
                sitesToShow = db.filter(site => favorites.includes(site.url));
                if (sitesToShow.length === 0) {
                    container.innerHTML = `
                        <div style='text-align:center; padding: 60px; color:#888; width: 100%;'>
                            <i class="fa-regular fa-star" style="font-size: 4rem; margin-bottom: 20px; opacity: 0.3;"></i>
                            <h2>Здесь пока пусто</h2>
                            <p>Добавь сайты звездочкой, чтобы они появились здесь.</p>
                        </div>`;
                    return;
                }
            } else {
                sitesToShow = db.filter(site => site.cat === currentCategory);
            }

            const grid = document.createElement('div');
            grid.className = 'grid';

            sitesToShow.forEach(site => {
                const isFav = favorites.includes(site.url);
                const card = document.createElement('a');
                card.className = 'card';
                card.href = site.url;
                card.target = "_blank";
                
                const iconUrl = `https://www.google.com/s2/favicons?domain=${new URL(site.url).hostname}&sz=64`;

                card.innerHTML = `
                    <div class="card-content">
                        <img src="${iconUrl}" onerror="this.src='https://cdn-icons-png.flaticon.com/512/1006/1006771.png'">
                        <div class="card-text">
                            <span class="card-title">${site.name}</span>
                            <span class="card-desc">${site.desc}</span>
                        </div>
                    </div>
                    <button class="fav-btn ${isFav ? 'active' : ''}">
                        <i class="fa-${isFav ? 'solid' : 'regular'} fa-star"></i>
                    </button>
                `;

                // Обработчик лайка
                card.querySelector('.fav-btn').addEventListener('click', (e) => {
                    e.preventDefault();
                    e.stopPropagation();
                    toggleFavorite(site.url);
                });

                grid.appendChild(card);
            });

            container.appendChild(grid);
        }

        function toggleFavorite(url) {
            if (favorites.includes(url)) {
                favorites = favorites.filter(f => f !== url);
            } else {
                favorites.push(url);
            }
            localStorage.setItem('vesperiaFavs', JSON.stringify(favorites));
            
            // Если мы на вкладке избранного, сразу обновляем
            if (currentCategory === "Избранное") {
                renderSites(); 
            } else {
                // Если нет, просто перерисовываем кнопки
                const searchVal = document.getElementById('search').value;
                renderSites(searchVal);
            }
        }

        document.getElementById('search').addEventListener('input', (e) => {
            renderSites(e.target.value);
        });

        // Запуск
        renderTabs();
        renderSites();
    </script>
</body>
</html>
